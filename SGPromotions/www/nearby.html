<!DOCTYPE html>
<html>
    <head>
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
		
		<title>SG Promotions</title>
        <link rel="stylesheet" href="css/sg.promotions.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
        <link rel="stylesheet" href="css/sg.promotions.custom.css" type="text/css">
        <link href="css/sg.promotions.restpages.css" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="jquery.jsonp-2.2.1.js"></script>
        <script type="text/javascript" src="jsrender.js"></script>
        <script type="text/javascript" src="promotions.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(document).bind("mobileinit", function() {
				$('#nearby').live('pagebeforeshow', function (event, ui) {
					// have internet connection
					if(true) {
						getNearby();
					} else {
					}
				});
			});
		</script>
        <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
        <!--<script type="text/javascript" charset="utf-8" src="phonegapMock.js"></script>-->

        <script type="text/javascript">
            document.addEventListener("deviceready",onDeviceReady,false);
            // once the device ready event fires, you can safely do your thing! -jm
            function onDeviceReady() {
                //document.getElementById("welcomeMsg").innerHTML += "PhoneGap is ready! version=" + window.device.phonegap;
                //console.log("onDeviceReady. You should see this message in Visual Studio's output window.");
            }
        </script>
        <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
	</head>
<body>

<div data-role="page" id="nearby" data-theme="c">
	<div data-role="content" id="nearby-content">
		<h1>choose promotion</h1>
        <div id="nearby-result">
        	<p>Searching for promotions...</p>
        </div>
	</div>
</div>

<script id="NearbyTemplate" type="text/x-jquery-tmpl">
    <h3><span id="count"></span> promotion(s) found: </h3><p/>
	<ul data-role="listview" id="nearby-list" data-inset="true" data-filter="true">
		{{#each results}}
		<li data-category="{{=category}}" data-distance="{{=distance}}" data-contact_number="{{=contact_number}}" data-contact_number_link="{{=contact_number_link}}" data-name="{{=name}}" data-promo="{{=promo}}" data-pic="{{=pic}}" data-operating_hours="{{=operating_hours}}" data-url="{{=url}}" data-expiry_date="{{=expiry_date}}" data-address="{{=address}}" data-lat="{{=lat}}" data-lng="{{=lng}}">
			<a href="promotion.html"><img src="{{=pic}}" width="24" height="24" class="ui-li-icon" style="top: 25px"/>
				<h3 class="black">{{=name}}</h3>
				<p class="black">{{=promo}}</p>
				<span class="ui-li-count">{{=distance}}m</span>
			</a>
		</li>
		{{/each}}
	</ul>
</script>

<script id="NearbyEmptyTemplate" type="text/x-jquery-tmpl">
    <p>There are no results. Please choose another <a href="javascript:history.back()">category</a>.</p>
</script>

<script id="NearbyErrorTemplate" type="text/x-jquery-tmpl">
    <p>An error occured while loading, please <a href="nearby.html">reload</a> to try again or go <a href="javascript:history.back()">back</a>.</p>
</script>
</body>
</html>