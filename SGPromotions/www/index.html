<!DOCTYPE html>
<html>
    <head>
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
		
		<title>SG Promotions</title>    
<!--		 
		<link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
        -->
        
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
        
        <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script src="jsrender.js"></script>
        <script src="promotions.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(document).bind("mobileinit", function() {
				$.mobile.page.prototype.options.addBackBtn = true;
				$.mobile.page.prototype.options.backBtnText = "Back";
				$.mobile.page.prototype.options.backBtnTheme = "b";
			
				$('#nearby').live('pagebeforeshow', function (event, ui) {
					// have internet connection
					if(true) {
						getNearby();
					} else {
					}
				});
				
				$('#category').live('pagebeforeshow', function (event, ui) {
					// have internet connection
					if(true) {
						getCategory();
					} else {
					}
				});
				
				$('#promotion').live('pagebeforeshow', function (event, ui) {
					var $item = $(this);
					if($(this).jqmData('category') != null) {
						$.each(promotion_parameters, function(index, value) {
							$('#promotion-' + value).text($item.jqmData(value));
						});
					}
				});
			});
		</script>
        <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
        
		<script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
        
        <script type="text/javascript">
			document.addEventListener("deviceready",onDeviceReady,false);
			// once the device ready event fires, you can safely do your thing! -jm
			function onDeviceReady() {
			//document.getElementById("welcomeMsg").innerHTML += "PhoneGap is ready! version=" + window.device.phonegap;
			//console.log("onDeviceReady. You should see this message in Visual Studio's output window.");
			}
		</script>
	</head>
<body>
<!--
	<h1>Hello PhoneGap</h1>
	<div id="welcomeMsg"></div>-->

<div data-role="page">
	<div data-role="header">
		<h1>SG Promotions</h1>
	</div>

	<div data-role="content">	
		<ul data-role="listview" data-inset="true" data-filter="false">
			<li><a href="#nearby">Display All Nearby Promotions</a></li>
			<li><a href="#category">Display Nearby Promotions By Category</a></li>
			<li><a href="#location">Display Promotions By Location</a></li>
		</ul>	
	</div>
</div>

<div data-role="page" id="nearby">
	<div data-role="header" data-position="fixed">
		<h1>Display All Nearby Promotions</h1>
	</div>

	<div data-role="content" id="nearby-content">
		<p>Nearby Promotions are currently loading...</p>
	</div>
</div>

<div data-role="page" id="category" data-position="fixed">
	<div data-role="header">
		<h1>Display Nearby Promotions By Category</h1>
	</div>

	<div data-role="content" id="category-content">
		<p>Categories are currently loading...</p>
	</div>
</div>

<div data-role="page" id="promotion" data-position="fixed">
	<div data-role="header">
		<h1>Display Particular Promotion</h1>
	</div>

	<div data-role="content" id="promotion-content">
	<p id="promotion-category"></p>
	<p id="promotion-distance"></p>
	<p id="promotion-contact_number"></p>
	<p id="promotion-contact_number_link"></p>
	<p id="promotion-name"></p>
	<p id="promotion-promo"></p>
	<p id="promotion-pic"></p>
	<p id="promotion-operating_hours"></p>
	<p id="promotion-url"></p>
	<p id="promotion-expiry_date"></p>
	<p id="promotion-address"></p>
	<p id="promotion-lat"></p>
	<p id="promotion-lng"></p>

<!--		<p>Promotion is currently loading...</p>-->
	</div>
</div>

<script id="NearbyTemplate" type="text/x-jquery-tmpl">
	<ul data-role="listview" id="nearby-list" data-theme="c" data-inset="false" data-filter="true">
		{{#each results}}
		<li data-category="{{=category}}" data-distance="{{=distance}}" data-contact_number="{{=contact_number}}" data-contact_number_link="{{=contact_number_link}}" data-name="{{=name}}" data-promo="{{=promo}}" data-pic="{{=pic}}" data-operating_hours="{{=operating_hours}}" data-url="{{=url}}" data-expiry_date="{{=expiry_date}}" data-address="{{=address}}" data-lat="{{=lat}}" data-lng="{{=lng}}">
			<a href="#promotion"><img src="{{=pic}}" width="24" height="24" class="ui-li-icon"/>
				<h3>{{=name}}</h3>
				<p>{{=promo}}</p>
				<span class="ui-li-count">{{=distance}}m</span>
			</a>
		</li>
		{{/each}}
	</ul>
</script>

<script id="CategoryTemplate" type="text/x-jquery-tmpl">
	<ul data-role="listview" id="category-list" data-theme="c" data-inset="true" data-filter="true">
		{{#each results}}
		<li>
			<a href="{{=categorytag}}"><img src="{{=iconurl}}" width="16" height="16" class="ui-li-icon"/>{{=category}}</a>
		</li>
		{{/each}}
	</ul>
</script>

<!--
$(document).ready(function() {
	$('a[name=submit_button]').click(function(){
		var inputVal = $('input[name=text_input]').val();
		$("#mainPage").data("inputVal", inputVal);
	})
});
$('#mainPage').live('pageshow', function(){
	var inputVal = $(this).data('inputVal') ? $(this).data('inputVal') : "";
	$('div p').text("Data from dialog: "+inputVal);
});
-->

<!--$('div[id="categories"] ul[data-role="listview"] a').live("click", function() {  
    var dataurl = $(this).attr("data-url");  
    if (dataurl != null)  
        $.mobile.changePage("articles.htm" + dataurl);  
});  -->
</body>
</html>